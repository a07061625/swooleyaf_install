output {
  if [save_types][es] {
    elasticsearch {
      hosts => "192.168.96.21:9201"
      index => "%{[save_types][es]}-%{+YYYYMMdd}"
      user => "elastic"
      password => "jw07061625"
    }
  }
  if [save_types][redis] {
    # nginx_access日志量较大,需要调大workers
    redis {
      batch => true
      batch_timeout => 3
      data_type => "list"
      host => ["127.0.0.1:6688"]
      password => "yjbn15su"
      db => 2
      key => "%{[save_types][redis]}-%{+YYYYMMdd}"
      codec => "json"
      timeout => 5
      workers => 10
    }
  }
  if [save_types][clickhouse] {
    clickhouse {
      headers => ["Authorization", "Basic YWRtaW46cGFzc3dvcmQxMjM="]
      http_hosts => ["http://127.0.0.1:8123/"]
      table => "%{[save_types][clickhouse]}"
      request_tolerance => 1 //发生重试前,响应状态码非200的请求次数
      #automatic_retries => 1 //每个host的重试次数
      #backoff_time => 3 //每次重试之间的间隔时间,单位为秒
      #flush_size => 50 //每次提交的数据量
      #idle_flush_time => 5 //每次提交的最大等待时间,单位为秒
    }
  }
  if [save_types][loki] {
    #https://grafana.com/docs/loki/latest/clients/logstash/
    loki {
      url => "%{[save_types][loki]}"
    }
  }
}